# N E X T F L O W
##########################################################################
#####   SAMPLE RIBOFLOW ARGUMENTS FILE WITH RNASEQ AND METADATA   ########
##########################################################################

# Tested on  version 19.04.1

# Perform fastqc at several stages of the pipeline
do_fastqc: true

# Check existnece of fastq.gz files and bowtie2 reference files
do_check_file_existence : true

dedup_method: "position"

do_rnaseq: true

do_ribo_creation: false

do_metadata: false

clip_arguments: '-a AGATCGGAAGAGC --overlap=8 --trimmed-only --minimum-length=24 --maximum-length=30 --quality-cutoff=28'
mapping_quality_cutoff: 2

###############################################################################

alignment_arguments:
   filter:        '-L 15 --no-unal --norc'
   genome: '--no-unal -k 1 --no-softclip --no-spliced-alignment'

###############################################################################

ribo:
    ref_name:        "appris-v1"
    metagene_radius: 50
    left_span:       35
    right_span:      10
    read_length:
       min: 24
       max: 30
    coverage: true

###############################################################################
# Output folder settings
output:
   individual_lane_directory: 'individual'
   merged_lane_directory: 'merged'
   intermediates:
      base: 'intermediates_position'
      clip: 'clip'
      log: 'log'
      transcriptome_alignment: 'transcriptome_alignment'
      filter: 'filter'
      genome_alignment: 'genome_alignment'
      bam_to_bed: 'bam_to_bed'
      quality_filter: 'quality_filter'
      deduplication: 'deduplication'
      bigwigs: 'bigwigs'
   output:
      base: 'output_position'
      log: 'log'
      fastqc: 'fastqc'
      ribo: 'ribo'

###############################################################################

input:
   reference:
      filter: ./rf_sample_data/filter/human_rtRNA*
      regions: ./rf_sample_data/annotation/appris_human_24_01_2019_actual_regions.bed
      transcript_lengths: ./rf_sample_data/annotation/appris_human_24_01_2019_selected.lengths.tsv
      genome: ./rf_sample_data/genome/hisat2_spliced_index*

   fastq_base: ""
   fastq:
       experiment_1:
         - ../samples/fastq_downloads/ribo-seq/GSM2817683_ribo.fastq.gz #GSM2817683
         - ../samples/fastq_downloads/ribo-seq/GSM2817686_ribo.fastq.gz #GSM2817686

   root_meta: "./project_position.yaml"

###############################################################################

psite_offset:
  offset_file: "./outputHuman_OFFSETS.csv"
  sample_matching:
    experiment_1:
      lanes:
        1: "GSM2817683"
        2: "GSM2817686"

###############################################################################

rnaseq:
  clip_arguments: '-u 1 --quality-cutoff=28'
  fastq_base: ""
  dedup_method: "position"

# library_strandedness: "reverse" (default, most common) or "forward"
#  i) ++,-- "forward"
#     read mapped to '+' strand indicates parental gene on '+' strand
#     read mapped to '-' strand indicates parental gene on '-' strand
#  ii) +-,-+ "reverse"
#     read mapped to '-' strand indicates parental gene on '+' strand


  library_strandedness: "forward"
  filter_arguments: '-L 20 --no-unal'
  hisat2_arguments: "--no-unal -k 1 --no-softclip"
  genome_read_trim:
    enabled: true
    length: 30
  fastq:
      experiment_1:
      - ../samples/fastq_downloads/rna-seq/GSM2817683_rna.fastq.gz
      - ../samples/fastq_downloads/rna-seq/GSM2817686_rna.fastq.gz
