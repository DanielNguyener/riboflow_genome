# N E X T F L O W
##########################################################################
#####   SAMPLE RIBOFLOW ARGUMENTS FILE WITH RNASEQ AND METADATA   ########
##########################################################################

# Tested on  version 19.04.1

# Perform fastqc at several stages of the pipeline
do_fastqc: false

# Check existnece of fastq.gz files and bowtie2 reference files
do_check_file_existence : true

dedup_method: "umi_tools"

umi_tools_extract_arguments: "--bc-pattern='.*(?P<umi_1>.{6})$' --extract-method=regex --3prime"
umi_tools_dedup_arguments:   "--read-length"

do_rnaseq: true

do_ribo_creation: false

do_metadata: false

clip_arguments: '-a CACTCGGGCACCAAGGAC --overlap=4 --trimmed-only --minimum-length 21 --maximum-length 46 --quality-cutoff=28 -u 4'
mapping_quality_cutoff: 2

###############################################################################

alignment_arguments:
   filter:        '-L 15 --no-unal --norc'
   genome: '--no-unal -k 1 --no-softclip --no-spliced-alignment'

###############################################################################

ribo:
    ref_name:        "appris-v1"
    metagene_radius: 50
    left_span:       35
    right_span:      10
    read_length:
       min: 21
       max: 40
    coverage: true

###############################################################################
# Output folder settings
output:
   individual_lane_directory: 'individual'
   merged_lane_directory: 'merged'
   intermediates:
      base: 'intermediates_umi'
      clip: 'clip'
      log: 'log'
      transcriptome_alignment: 'transcriptome_alignment'
      filter: 'filter'
      genome_alignment: 'genome_alignment'
      bam_to_bed: 'bam_to_bed'
      quality_filter: 'quality_filter'
      deduplication: 'deduplication'
      bigwigs: 'bigwigs'
   output:
      base: 'output_umi'
      log: 'log'
      fastqc: 'fastqc'
      ribo: 'ribo'

###############################################################################

input:
   reference:
      filter: ./rf_sample_data/filter/human_rtRNA*
      regions: ./rf_sample_data/annotation/appris_human_24_01_2019_actual_regions.bed
      transcript_lengths: ./rf_sample_data/annotation/appris_human_24_01_2019_selected.lengths.tsv
      genome: ./rf_sample_data/genome/hisat2_spliced_index*

   fastq_base: ""
   fastq:
       experiment_1:
         - ../samples/fastq_downloads_umi/SRR10251273.fastq.gz #GSM4114767
         - ../samples/fastq_downloads_umi/SRR10251274.fastq.gz  #GSM4114768


   root_meta: "./project_umi.yaml"

###############################################################################

psite_offset:
  offset_file: "./outputHuman_OFFSETS.csv"
  sample_matching:
    experiment_1:
      lanes:
        1: "GSM4114767"
        2: "GSM4114768"


###############################################################################

rnaseq:
  clip_arguments: '--quality-cutoff=28 --minimum-length=30 --maximum-length=200'
  dedup_method: "position"
  fastq_base: ""
  # library_strandedness: "reverse" (default, most common) or "forward"
#  i) ++,-- "forward"
#     read mapped to '+' strand indicates parental gene on '+' strand
#     read mapped to '-' strand indicates parental gene on '-' strand
#  ii) +-,-+ "reverse"
#     read mapped to '-' strand indicates parental gene on '+' strand

  library_strandedness: "reverse"
  filter_arguments: '-L 20 --no-unal'
  hisat2_arguments: "--no-unal -k 1 --no-softclip"
  genome_read_trim:
    enabled: true
    length: 35
  fastq:
      experiment_1:
      - ../samples/fastq_downloads_umi/SRR10251291.fastq.gz
      - ../samples/fastq_downloads_umi/SRR10251292.fastq.gz
